!function(a){"use strict";var t=function(t,e){this.options=e,this.$tabs=a(t),this._accordionVisible=!1,this._initAccordion(),this._checkStateOnResize();var s=this;setTimeout(function(){s.checkState()},0)};t.DEFAULTS={accordionClass:"visible-xs",tabsClass:"hidden-xs",accordionTemplate:function(a,t,e,s){return'<div class="panel panel-default">   <div class="panel-heading">      <h4 class="panel-title">      </h4>   </div>   <div id="'+t+'" class="panel-collapse collapse '+(s?"in":"")+'">       <div class="panel-body js-tabcollapse-panel-body">       </div>   </div></div>'}},t.prototype.checkState=function(){this.$tabs.is(":visible")&&this._accordionVisible?(this.showTabs(),this._accordionVisible=!1):this.$accordion.is(":visible")&&!this._accordionVisible&&(this.showAccordion(),this._accordionVisible=!0)},t.prototype.showTabs=function(){var t=this;this.$tabs.trigger(a.Event("show-tabs.bs.tabcollapse"));var e=this.$accordion.find(".js-tabcollapse-panel-heading").detach();e.each(function(){var e=a(this),s=e.data("bs.tabcollapse.parentLi"),i=t._panelHeadingToTabHeading(e);s.removeClass("active"),s.parent().hasClass("dropdown-menu")&&!s.siblings("li").hasClass("active")&&s.parent().parent().removeClass("active"),i.hasClass("collapsed")?i.removeClass("collapsed"):(s.addClass("active"),s.parent().hasClass("dropdown-menu")&&s.parent().parent().addClass("active")),s.append(e)}),a("li").hasClass("active")||a("li").first().addClass("active");var s=this.$accordion.find(".js-tabcollapse-panel-body");if(s.each(function(){var t=a(this),e=t.data("bs.tabcollapse.tabpane");e.append(t.children("*").detach())}),this.$accordion.html(""),this.options.updateLinks){var i=a(this.options.tabContentSelector)||this.$tabs.siblings(".tab-content");i.find('[data-toggle-was="tab"], [data-toggle-was="pill"]').each(function(){var t=a(this),e=t.attr("href").replace(/-collapse$/g,"");t.attr({"data-toggle":t.attr("data-toggle-was"),"data-toggle-was":"","data-parent":"",href:e})})}this.$tabs.trigger(a.Event("shown-tabs.bs.tabcollapse"))},t.prototype.showAccordion=function(){this.$tabs.trigger(a.Event("show-accordion.bs.tabcollapse"));var t=this.$tabs.find('li:not(.dropdown) [data-toggle="tab"], li:not(.dropdown) [data-toggle="pill"]'),e=this;if(t.each(function(){var t=a(this),s=t.parent();t.data("bs.tabcollapse.parentLi",s),e.$accordion.append(e._createAccordionGroup(e.$accordion.attr("id"),t.detach()))}),this.options.updateLinks){var s=this.$accordion.attr("id"),i=this.$accordion.find(".js-tabcollapse-panel-body");i.find('[data-toggle="tab"], [data-toggle="pill"]').each(function(){var t=a(this),e=t.attr("href")+"-collapse";t.attr({"data-toggle-was":t.attr("data-toggle"),"data-toggle":"collapse","data-parent":"#"+s,href:e})})}this.$tabs.trigger(a.Event("shown-accordion.bs.tabcollapse"))},t.prototype._panelHeadingToTabHeading=function(a){var t=a.attr("href").replace(/-collapse$/g,"");return a.attr({"data-toggle":"tab",href:t,"data-parent":""}),a},t.prototype._tabHeadingToPanelHeading=function(a,t,e,s){return a.addClass("js-tabcollapse-panel-heading "+(s?"":"collapsed")),a.attr({"data-toggle":"collapse","data-parent":"#"+e,href:"#"+t}),a},t.prototype._checkStateOnResize=function(){var t=this;a(window).resize(function(){clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t.checkState()},100)})},t.prototype._initAccordion=function(){this.$accordion=a('<div class="panel-group '+this.options.accordionClass+'" id="'+this.$tabs.attr("id")+'-accordion"></div>'),this.$tabs.after(this.$accordion),this.$tabs.addClass(this.options.tabsClass);var t=a(this.options.tabContentSelector)||this.$tabs.siblings(".tab-content");t.addClass(this.options.tabsClass)},t.prototype._createAccordionGroup=function(t,e){var s=e.attr("data-target"),i=e.data("bs.tabcollapse.parentLi").is(".active");s||(s=e.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=a(s),n=o.attr("id")+"-collapse",c=a(this.options.accordionTemplate(e,n,t,i));return c.find(".panel-heading > .panel-title").append(this._tabHeadingToPanelHeading(e,n,t,i)),c.find(".panel-body").append(o.children("*").detach()).data("bs.tabcollapse.tabpane",o),c},a.fn.tabCollapse=function(e){return this.each(function(){var s=a(this),i=s.data("bs.tabcollapse"),o=a.extend({},t.DEFAULTS,s.data(),"object"==typeof e&&e);i||s.data("bs.tabcollapse",new t(this,o))})},a.fn.tabCollapse.Constructor=t}(window.jQuery);